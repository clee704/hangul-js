/**
 * hangul-dubeol.js
 * http://github.com/clee704/hangul-js
 * @version 1.1.2
 * @copyright Copyright 2013, Choongmin Lee
 * @license MIT license
 */
(function(e,t){"use strict";var o=new e.Map;o.addAll({A:"ㅁ",B:"ㅠ",C:"ㅊ",D:"ㅇ",E:"ㄸ",F:"ㄹ",G:"ㅎ",H:"ㅗ",I:"ㅑ",J:"ㅓ",K:"ㅏ",L:"ㅣ",M:"ㅡ",N:"ㅜ",O:"ㅒ",P:"ㅖ",Q:"ㅃ",R:"ㄲ",S:"ㄴ",T:"ㅆ",U:"ㅕ",V:"ㅍ",W:"ㅉ",X:"ㅌ",Y:"ㅛ",Z:"ㅋ"});o.addAll({a:"ㅁ",b:"ㅠ",c:"ㅊ",d:"ㅇ",e:"ㄷ",f:"ㄹ",g:"ㅎ",h:"ㅗ",i:"ㅑ",j:"ㅓ",k:"ㅏ",l:"ㅣ",m:"ㅡ",n:"ㅜ",o:"ㅐ",p:"ㅔ",q:"ㅂ",r:"ㄱ",s:"ㄴ",t:"ㅅ",u:"ㅕ",v:"ㅍ",w:"ㅈ",x:"ㅌ",y:"ㅛ",z:"ㅋ"});function r(e){var t=[],o=new i(t);for(var r=0;r<e.length;r++){o.next(e.charAt(r))}o.next();return t.join("")}function i(e){this.output=e;this.currentBlock=t;this._prevJamo=t}i.prototype.reset=function(){this.currentBlock=t;this._prevJamo=t};i.prototype.next=function(e){this.currentBlock=this._next(e)};i.prototype._next=function(r){var i=this.output,s=this.currentBlock,n=o.get(r),u=this._prevJamo,l;this._prevJamo=n;if(r==="\b"){var a=t;if(s===t){i.pop()}else if(e.isSyllable(s)){l=e.decompose(s);if(l[2]){a=e.compose(l[0],l[1])}else{a=l[0]}}return a}if(!o.hasKey(r)){this._flush();if(r!==t)i.push(r);return t}var p=e.composeDoubleJamo(u,n);if(o.hasValue(p))p=t;if(p&&!e.isSyllable(s))return p;if(p){l=e.decompose(s);l[e.isMedial(p)?1:2]=p;return e.compose.apply(e,l)}if(e.isFinal(n)){if(!e.isSyllable(s)||e.getFinal(s)!==""){this._flush();return n}l=e.decompose(s);return e.compose(l[0],l[1],n)}if(e.isInitial(n)){this._flush();return n}if(e.isInitial(s)){return e.compose(s,n,"")}if(!e.isSyllable(s)||!e.isInitial(u)){this._flush();return n}l=e.decompose(s);if(e.isInitial(l[2])){i.push(e.compose(l[0],l[1],""));return e.compose(l[2],n,"")}var h=e.decomposeDoubleJamo(l[2]);i.push(e.compose(l[0],l[1],h[0]));return e.compose(h[1],n,"")};i.prototype._flush=function(){if(this.currentBlock!==t){this.output.push(this.currentBlock)}};function s(e){var t=[];for(var o=0;o<e.length;o++){n(t,e.charAt(o))}return t.join("")}function n(t,r){var i;if(o.hasValue(r)){t.push(o.inverse.get(r));return}i=e.decomposeDoubleJamo(r);if(i){t.push(o.inverse.get(i[0]));t.push(o.inverse.get(i[1]));return}if(!e.isSyllable(r)){t.push(r);return}var s=e.decompose(r);for(var n=0;n<s.length;n++){var u=s[n];if(o.hasValue(u)){t.push(o.inverse.get(u));continue}i=e.decomposeDoubleJamo(u);t.push(o.inverse.get(i[0]));t.push(o.inverse.get(i[1]))}}e.dubeol={map:o,fromQwerty:r,toQwerty:s,Automaton:i}})(hangul);