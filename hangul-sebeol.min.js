/**
 * hangul-sebeol.js 1.1.1dev
 * http://github.com/clee704/hangul-js
 * @license Copyright 2013, Choongmin Lee; MIT license
 */
(function(t,e){"use strict";var i=function(){var t={},e;return function(i,r){e=t[i]||(t[i]={});return e[r]||(e[r]=new n(i,r))}}();function n(t,e){this.type=t;this.c=e;this.code=e.charCodeAt(0);this.string=t+"["+e+"]"}n.prototype.toString=function(){return this.string};var r=new t.Map;r.addAll({"'":o("ㅌ"),0:o("ㅋ"),";":o("ㅂ"),h:o("ㄴ"),i:o("ㅁ"),j:o("ㅇ"),k:o("ㄱ"),l:o("ㅈ"),m:o("ㅎ"),n:o("ㅅ"),o:o("ㅊ"),p:o("ㅍ"),u:o("ㄷ"),y:o("ㄹ"),4:u("ㅛ"),5:u("ㅠ"),6:u("ㅑ"),7:u("ㅖ"),8:u("ㅢ"),G:u("ㅒ"),b:u("ㅜ"),c:u("ㅔ"),d:u("ㅣ"),e:u("ㅕ"),f:u("ㅏ"),g:u("ㅡ"),r:u("ㅐ"),t:u("ㅓ"),v:u("ㅗ"),"/":s("ㅗ"),9:s("ㅜ"),"!":l("ㄲ"),"#":l("ㅈ"),$:l("ㄿ"),"%":l("ㄾ"),1:l("ㅎ"),2:l("ㅆ"),3:l("ㅂ"),"@":l("ㄺ"),A:l("ㄷ"),C:l("ㅋ"),D:l("ㄼ"),E:l("ㄵ"),F:l("ㄻ"),Q:l("ㅍ"),R:l("ㅀ"),S:l("ㄶ"),T:l("ㄽ"),V:l("ㄳ"),W:l("ㅌ"),X:l("ㅄ"),Z:l("ㅊ"),a:l("ㅇ"),q:l("ㅅ"),s:l("ㄴ"),w:l("ㄹ"),x:l("ㄱ"),z:l("ㅁ"),'"':a("·"),"&":a("“"),"(":a("'"),")":a("~"),"*":a("”"),"+":a("+"),",":a(","),"-":a(")"),".":a("."),":":a("4"),"<":c(","),"=":a(">"),">":c("."),"?":a("!"),B:a("?"),H:a("0"),I:a("7"),J:a("1"),K:a("2"),L:a("3"),M:a('"'),N:a("-"),O:a("8"),P:a("9"),U:a("6"),Y:a("5"),"[":a("("),"\\":a(":"),"]":a("<"),"^":a("="),_:a(";"),"`":a("*"),"{":a("%"),"|":a("\\"),"}":a("/"),"~":a("※")});function o(t){return i("initial",t)}function u(t){return i("medial",t)}function s(t){return i("medial-special",t)}function l(t){return i("final",t)}function a(t){return i("symbol",t)}function c(t){return i("extra",t)}function h(t){var e=[],i=new p(e);for(var n=0;n<t.length;n++){i.next(t.charAt(n))}i.next();return e.join("")}function p(t){this.output=t;this.currentBlock=e;this._indexes={initial:0,medial:1,"medial-special":1,"final":2};this._wrappers={initial:o,medial:u,"final":l};this._jamoBlock=[];this._jamoQueue=[]}p.prototype.reset=function(){this.currentBlock=e;this._jamoBlock.length=0;this._jamoQueue.length=0};p.prototype.next=function(i){var n;if(i==="\b"){if(this._jamoQueue.length>0){n=this._jamoQueue.pop();delete this._jamoBlock[this._indexes[n.type]];this._renderCurrentBlock()}else{this.output.pop()}return}if(!r.hasKey(i)){this._flush();if(i!==e)this.output.push(i);return}n=r.get(i);if(!t.isJamo(n.c)){this._flush();this.output.push(n.c);return}var o=this._indexes[n.type],u=this._jamoBlock,s=u[o];if(s){var l=t.composeDoubleJamo(s.c,n.c);if(l&&(s.type==="initial"&&!u[1]&&!u[2]&&t.isInitial(l)||s.type==="medial-special")){u[o]=this._wrappers[n.type](l);this._renderCurrentBlock();return}this._flush()}u[o]=n;this._jamoQueue.push(n);this._renderCurrentBlock()};p.prototype._flush=function(){if(this.currentBlock!==e){this.output.push(this.currentBlock);this.currentBlock=e}this._jamoBlock.length=0;this._jamoQueue.length=0};p.prototype._push=function(t,e){for(var i=0;i<e.length;i++){if(i in e)t.push(e[i].c)}};p.prototype._renderCurrentBlock=function(){var i=this._jamoBlock,n;if(i[0]){if(i[1]){if(i[2]){n=t.compose(i[0].c,i[1].c,i[2].c)}else{n=t.compose(i[0].c,i[1].c)}}else{n=i[0].c}}else if(i[1]){n=i[1].c}else if(i[2]){n=i[2].c}else{n=e}this.currentBlock=n};function f(t){var e=[];for(var i=0;i<t.length;i++){d(e,t.charAt(i))}return e.join("")}function d(e,i){if(t.isJamo(i)){return _(e,i,m(i))}if(!t.isSyllable(i)){return e.push(r.inverse.get(a(i))||i)}var n=t.decompose(i);_(e,n[0],o);_(e,n[1],u);if(n[2])_(e,n[2],l)}function m(e){return t.isInitial(e)?o:t.isMedial(e)?u:l}function _(e,i,n){var l=n(i);if(r.hasValue(l))return e.push(r.inverse.get(l));var a=t.decomposeDoubleJamo(i),c=n===u?s:o;e.push(r.inverse.get(c(a[0])));e.push(r.inverse.get(n(a[1])))}function v(e){var i={};for(var n in e.items){var r=e.get(n),o=i[r.type]||(i[r.type]={});o[n]=r.c}var u=new t.Map;u.addAll(i["extra"]);u.addAll(i["symbol"]);u.addAll(i["final"]);u.addAll(i["medial-special"]);u.addAll(i["medial"]);u.addAll(i["initial"]);return u}t.sebeol={map:v(r),fromQwerty:h,toQwerty:f,Automaton:p}})(hangul);